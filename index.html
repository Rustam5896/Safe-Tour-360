<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart City Health Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .health-card {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .health-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .map-container {
            background: linear-gradient(45deg, #f0f9ff, #e0f2fe);
            border: 2px solid #e2e8f0;
        }
        
        .zone-marker {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .zone-marker:hover {
            transform: scale(1.3);
            z-index: 10;
        }
        
        .alert-toast {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .time-slider {
            background: linear-gradient(to right, #3b82f6, #10b981);
        }
        
        .recommendation-item {
            border-left: 4px solid #10b981;
            transition: all 0.3s ease;
        }
        
        .recommendation-item:hover {
            background-color: #f0fdf4;
            border-left-color: #059669;
        }
        
        .photo-gallery {
            display: flex;
            gap: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .photo-item {
            min-width: 120px;
            height: 80px;
            border-radius: 8px;
            background-size: cover;
            background-position: center;
            animation: slidePhotos 15s infinite linear;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .photo-item:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        @keyframes slidePhotos {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        .floating-icon {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .city-photo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: rotatePhoto 20s linear infinite;
        }
        
        @keyframes rotatePhoto {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .environmental-bg {
            background: linear-gradient(45deg, 
                rgba(34, 197, 94, 0.1) 0%, 
                rgba(59, 130, 246, 0.1) 25%, 
                rgba(251, 191, 36, 0.1) 50%, 
                rgba(239, 68, 68, 0.1) 75%, 
                rgba(34, 197, 94, 0.1) 100%);
            animation: gradientShift 10s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .photo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Footer Animation Styles */
        .neon-glow {
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5), 0 0 10px rgba(255, 255, 255, 0.3), 0 0 15px rgba(255, 255, 255, 0.2);
            animation: neonPulse 3s ease-in-out infinite alternate;
        }

        @keyframes neonPulse {
            0% { text-shadow: 0 0 5px rgba(255, 255, 255, 0.5), 0 0 10px rgba(255, 255, 255, 0.3), 0 0 15px rgba(255, 255, 255, 0.2); }
            100% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.5), 0 0 30px rgba(255, 255, 255, 0.3); }
        }

        .rainbow-animation {
            animation: rainbow 4s linear infinite;
        }

        @keyframes rainbow {
            0% { color: #ff0000; }
            16.66% { color: #ff8000; }
            33.33% { color: #ffff00; }
            50% { color: #00ff00; }
            66.66% { color: #0080ff; }
            83.33% { color: #8000ff; }
            100% { color: #ff0000; }
        }

        /* Hover animations for footer links */
        footer a:hover {
            transform: translateY(-2px);
            transition: all 0.3s ease;
        }

        /* Animated statistics counters */
        .stat-counter {
            animation: countUp 2s ease-out;
        }

        @keyframes countUp {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Floating social icons */
        footer .floating-icon {
            animation: float 3s ease-in-out infinite;
        }

        footer .floating-icon:nth-child(2) {
            animation-delay: 0.5s;
        }

        footer .floating-icon:nth-child(3) {
            animation-delay: 1s;
        }

        footer .floating-icon:nth-child(4) {
            animation-delay: 1.5s;
        }

        /* Newsletter button animation */
        .newsletter-btn {
            animation: buttonPulse 2s infinite;
        }

        @keyframes buttonPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); }
        }

        /* Partner logos animation */
        .partner-logo {
            transition: all 0.3s ease;
        }

        .partner-logo:hover {
            transform: scale(1.1) rotate(5deg);
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Status indicator animation */
        .status-indicator {
            animation: statusBlink 2s infinite;
        }

        @keyframes statusBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="gradient-bg text-white p-4 shadow-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center space-x-3 mb-4 md:mb-0">
                <div class="city-photo environmental-bg floating-icon" style="background-image: linear-gradient(45deg, #22c55e, #3b82f6, #fbbf24, #ef4444);"></div>
                <h1 class="text-2xl md:text-3xl font-bold">Smart City Health Dashboard</h1>
            </div>
            <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4">
                <select id="citySelect" class="px-4 py-2 rounded-lg text-gray-800 font-medium">
                    <option value="delhi">Delhi</option>
                    <option value="mumbai">Mumbai</option>
                    <option value="bangalore">Bangalore</option>
                    <option value="chennai">Chennai</option>
                </select>
                <div class="text-sm opacity-90">üõ∞Ô∏è NASA Earth Data Powered</div>
            </div>
        </div>
    </header>

    <!-- Alert Toast -->
    <div id="alertToast" class="fixed top-20 right-4 z-50 hidden">
        <div class="alert-toast bg-red-500 text-white px-6 py-4 rounded-lg shadow-lg max-w-sm">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">üö®</span>
                <div>
                    <div class="font-bold">Health Alert!</div>
                    <div id="alertMessage" class="text-sm"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-4 space-y-6">
        <!-- Real-time Weather & Environmental Data -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
            <!-- Live Weather Widget -->
            <div class="bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-4 text-white shadow-lg">
                <h3 class="text-base font-bold mb-3 flex items-center">
                    <span class="floating-icon mr-2">üå§Ô∏è</span>
                    Live Weather
                </h3>
                <div class="grid grid-cols-2 gap-3">
                    <div class="text-center">
                        <div class="text-2xl mb-1">‚òÄÔ∏è</div>
                        <div class="text-xl font-bold" id="liveTemp">32¬∞C</div>
                        <div class="text-xs opacity-90">Temperature</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-1">üí®</div>
                        <div class="text-xl font-bold" id="windSpeed">12 km/h</div>
                        <div class="text-xs opacity-90">Wind Speed</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-1">üíß</div>
                        <div class="text-xl font-bold" id="humidity">68%</div>
                        <div class="text-xs opacity-90">Humidity</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-1">üëÅÔ∏è</div>
                        <div class="text-xl font-bold" id="visibility">8 km</div>
                        <div class="text-xs opacity-90">Visibility</div>
                    </div>
                </div>
                <div class="mt-3 text-center text-xs opacity-90">
                    <span class="pulse-animation">üî¥ LIVE</span> Updated every 5 minutes
                </div>
            </div>

            <!-- AI Health Predictions -->
            <div class="bg-gradient-to-br from-green-500 to-teal-600 rounded-xl p-4 text-white shadow-lg">
                <h3 class="text-base font-bold mb-3 flex items-center">
                    <span class="floating-icon mr-2">ü§ñ</span>
                    AI Predictions
                </h3>
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-sm">Next 6 Hours:</span>
                        <span class="font-bold text-sm" id="prediction6h">Moderate Risk</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm">Tomorrow:</span>
                        <span class="font-bold text-sm" id="prediction24h">High Risk</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm">This Week:</span>
                        <span class="font-bold text-sm" id="predictionWeek">Improving</span>
                    </div>
                    <div class="mt-3 p-2 bg-white bg-opacity-20 rounded-lg">
                        <div class="text-xs">
                            <strong>üéØ AI Insight:</strong> <span id="aiInsight">Air quality expected to worsen due to wind patterns. Recommend indoor activities after 2 PM.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Stats Panel -->
            <div class="bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl p-4 text-white shadow-lg">
                <h3 class="text-base font-bold mb-3 flex items-center">
                    <span class="floating-icon mr-2">üìä</span>
                    Quick Stats
                </h3>
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-sm">Active Sensors:</span>
                        <span class="font-bold text-sm text-yellow-300" id="quickSensors">47</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm">Data Points:</span>
                        <span class="font-bold text-sm text-blue-300" id="quickDataPoints">1,247</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm">Coverage:</span>
                        <span class="font-bold text-sm text-green-300">94.2%</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm">Last Update:</span>
                        <span class="font-bold text-sm text-orange-300" id="quickLastUpdate">2 min ago</span>
                    </div>
                </div>
                <div class="mt-3 text-center">
                    <div class="text-xs opacity-90">
                        <span class="pulse-animation">üü¢</span> All Systems Online
                    </div>
                </div>
            </div>
        </div>

        <!-- Environmental Photo Gallery -->
        <div class="bg-white rounded-xl p-6 shadow-md overflow-hidden fade-in-up">
            <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                <span class="floating-icon mr-2 rainbow-animation">üì∏</span>
                <span class="neon-glow">Live Environmental Snapshots</span>
            </h3>
            <div class="photo-gallery">
                <div class="photo-item" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 80%22><rect fill=%22%2322c55e%22 width=%22120%22 height=%2280%22/><circle fill=%22%23ffffff%22 cx=%2260%22 cy=%2240%22 r=%2215%22/><text x=%2260%22 y=%2245%22 text-anchor=%22middle%22 fill=%22%2322c55e%22 font-size=%2212%22>üå≥</text></svg>');">
                    <div class="photo-overlay"></div>
                </div>
                <div class="photo-item" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 80%22><rect fill=%22%23ef4444%22 width=%22120%22 height=%2280%22/><circle fill=%22%23ffffff%22 cx=%2260%22 cy=%2240%22 r=%2215%22/><text x=%2260%22 y=%2245%22 text-anchor=%22middle%22 fill=%22%23ef4444%22 font-size=%2212%22>üè≠</text></svg>');">
                    <div class="photo-overlay"></div>
                </div>
                <div class="photo-item" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 80%22><rect fill=%22%233b82f6%22 width=%22120%22 height=%2280%22/><circle fill=%22%23ffffff%22 cx=%2260%22 cy=%2240%22 r=%2215%22/><text x=%2260%22 y=%2245%22 text-anchor=%22middle%22 fill=%22%233b82f6%22 font-size=%2212%22>üåä</text></svg>');">
                    <div class="photo-overlay"></div>
                </div>
                <div class="photo-item" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 80%22><rect fill=%22%23fbbf24%22 width=%22120%22 height=%2280%22/><circle fill=%22%23ffffff%22 cx=%2260%22 cy=%2240%22 r=%2215%22/><text x=%2260%22 y=%2245%22 text-anchor=%22middle%22 fill=%22%23fbbf24%22 font-size=%2212%22>‚òÄÔ∏è</text></svg>');">
                    <div class="photo-overlay"></div>
                </div>
                <div class="photo-item" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 80%22><rect fill=%22%2310b981%22 width=%22120%22 height=%2280%22/><circle fill=%22%23ffffff%22 cx=%2260%22 cy=%2240%22 r=%2215%22/><text x=%2260%22 y=%2245%22 text-anchor=%22middle%22 fill=%22%2310b981%22 font-size=%2212%22>üèûÔ∏è</text></svg>');">
                    <div class="photo-overlay"></div>
                </div>
                <div class="photo-item" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 80%22><rect fill=%22%23a855f7%22 width=%22120%22 height=%2280%22/><circle fill=%22%23ffffff%22 cx=%2260%22 cy=%2240%22 r=%2215%22/><text x=%2260%22 y=%2245%22 text-anchor=%22middle%22 fill=%22%23a855f7%22 font-size=%2212%22>üå∏</text></svg>');">
                    <div class="photo-overlay"></div>
                </div>
            </div>
            <div class="text-xs text-gray-500 mt-2 text-center">
                <span class="pulse-animation">üî¥ LIVE</span> Real-time satellite imagery from NASA Earth Observatory
            </div>
        </div>

        <!-- Health Index Cards -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="health-card bg-white rounded-xl p-4 shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-2xl font-bold text-blue-600" id="healthIndex">72</div>
                        <div class="text-sm text-gray-600">Health Index</div>
                    </div>
                    <div class="text-3xl floating-icon">üíö</div>
                </div>
            </div>
            
            <div class="health-card bg-white rounded-xl p-4 shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-2xl font-bold text-red-500" id="airQuality">156</div>
                        <div class="text-sm text-gray-600">AQI Level</div>
                    </div>
                    <div class="text-3xl pulse-animation">üå´Ô∏è</div>
                </div>
            </div>
            
            <div class="health-card bg-white rounded-xl p-4 shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-2xl font-bold text-orange-500" id="temperature">38¬∞C</div>
                        <div class="text-sm text-gray-600">Temperature</div>
                    </div>
                    <div class="text-3xl floating-icon">üå°Ô∏è</div>
                </div>
            </div>
            
            <div class="health-card bg-white rounded-xl p-4 shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-2xl font-bold text-green-500" id="greenCover">23%</div>
                        <div class="text-sm text-gray-600">Green Cover</div>
                    </div>
                    <div class="text-3xl floating-icon">üåø</div>
                </div>
            </div>
        </div>

        <!-- Time Slider -->
        <div class="bg-white rounded-xl p-6 shadow-md">
            <div class="flex flex-col md:flex-row items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-gray-800 mb-2 md:mb-0">üìÖ Historical Data Timeline</h3>
                <div class="text-sm text-gray-600" id="currentDate">Today - Dec 15, 2024</div>
            </div>
            <div class="relative">
                <input type="range" id="timeSlider" min="0" max="30" value="30" 
                       class="w-full h-2 time-slider rounded-lg appearance-none cursor-pointer">
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                    <span>30 days ago</span>
                    <span>15 days ago</span>
                    <span>Today</span>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 xl:grid-cols-4 gap-4">
            <!-- Map Section -->
            <div class="xl:col-span-3 space-y-4">
                <!-- Filter Controls -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">üîç Data Filters</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                        <button onclick="setFilter('all')" class="filter-btn bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors">
                            All Data
                        </button>
                        <button onclick="setFilter('air')" class="filter-btn bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors">
                            Air Quality
                        </button>
                        <button onclick="setFilter('temp')" class="filter-btn bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors">
                            Temperature
                        </button>
                        <button onclick="setFilter('green')" class="filter-btn bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors">
                            Green Cover
                        </button>
                    </div>
                </div>

                <!-- Interactive Map -->
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-800">üó∫Ô∏è Interactive City Health Map</h3>
                        <div class="flex space-x-2">
                            <button onclick="toggleHeatmap()" id="heatmapBtn" class="px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600">
                                üî• Heatmap
                            </button>
                            <button onclick="toggle3D()" id="3dBtn" class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                                üè¢ 3D View
                            </button>
                        </div>
                    </div>
                    <div id="map" class="h-64 lg:h-80 rounded-lg overflow-hidden border-2 border-gray-200"></div>
                    
                    <!-- Enhanced Map Controls -->
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Map Legend -->
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <div class="text-sm font-bold mb-2">Health Risk Zones</div>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span>Healthy (0-50 AQI)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span>Moderate (51-100)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                    <span>Unhealthy (101-150)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <span>Hazardous (150+)</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Live Map Stats -->
                        <div class="p-3 bg-blue-50 rounded-lg">
                            <div class="text-sm font-bold mb-2">Live Map Statistics</div>
                            <div class="space-y-1 text-xs">
                                <div class="flex justify-between">
                                    <span>Active Sensors:</span>
                                    <span class="font-bold text-green-600" id="activeSensors">47</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Data Points:</span>
                                    <span class="font-bold text-blue-600" id="dataPoints">1,247</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Last Update:</span>
                                    <span class="font-bold text-purple-600" id="lastUpdate">2 min ago</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Coverage:</span>
                                    <span class="font-bold text-orange-600">94.2%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üìà Health Metrics Dashboard</h3>
                    
                    <!-- Chart Type Selector -->
                    <div class="mb-4 flex flex-wrap gap-2">
                        <button onclick="switchChart('trend')" id="trendBtn" class="chart-btn bg-blue-500 text-white px-3 py-1 rounded text-sm">
                            üìà Trends
                        </button>
                        <button onclick="switchChart('comparison')" id="comparisonBtn" class="chart-btn bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm">
                            üìä City Comparison
                        </button>
                        <button onclick="switchChart('exposure')" id="exposureBtn" class="chart-btn bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm">
                            üë• Population Exposure
                        </button>
                    </div>
                    
                    <div class="relative h-48 lg:h-56">
                        <canvas id="mainChart" class="w-full h-full"></canvas>
                    </div>
                    
                    <!-- Chart Insights & Analytics -->
                    <div class="mt-6 space-y-4">
                        <!-- Key Insights Panel -->
                        <div id="chartInsights" class="p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200">
                            <div class="flex items-start space-x-3">
                                <div class="text-2xl">üß†</div>
                                <div>
                                    <h4 class="font-bold text-blue-900 mb-2">AI-Powered Insights</h4>
                                    <div class="text-sm text-blue-800">
                                        <strong>üìä Key Finding:</strong> Air quality shows declining trend over past week. Temperature rising above safe levels.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <div class="bg-white p-3 rounded-lg border border-gray-200 text-center">
                                <div class="text-lg font-bold text-green-600" id="avgImprovement">+12%</div>
                                <div class="text-xs text-gray-600">Weekly Improvement</div>
                            </div>
                            <div class="bg-white p-3 rounded-lg border border-gray-200 text-center">
                                <div class="text-lg font-bold text-blue-600" id="dataAccuracy">94.2%</div>
                                <div class="text-xs text-gray-600">Data Accuracy</div>
                            </div>
                            <div class="bg-white p-3 rounded-lg border border-gray-200 text-center">
                                <div class="text-lg font-bold text-purple-600" id="trendReliability">High</div>
                                <div class="text-xs text-gray-600">Trend Reliability</div>
                            </div>
                            <div class="bg-white p-3 rounded-lg border border-gray-200 text-center">
                                <div class="text-lg font-bold text-orange-600" id="nextUpdate">3 min</div>
                                <div class="text-xs text-gray-600">Next Update</div>
                            </div>
                        </div>

                        <!-- Action Recommendations -->
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200">
                            <div class="flex items-start space-x-3">
                                <div class="text-2xl">üí°</div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-green-900 mb-2">Recommended Actions</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-600">‚úì</span>
                                            <span class="text-green-800">Increase monitoring in high-risk zones</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-600">‚úì</span>
                                            <span class="text-green-800">Deploy mobile air purification units</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-600">‚úì</span>
                                            <span class="text-green-800">Issue public health advisories</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-600">‚úì</span>
                                            <span class="text-green-800">Activate emergency response protocols</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-3">
                <!-- Zone Info Panel -->
                <div id="zoneInfo" class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-base font-bold text-gray-800 mb-3">üìç Area Details</h3>
                    <div class="text-center text-gray-500 py-4">
                        <div class="text-3xl mb-2">üó∫Ô∏è</div>
                        <p class="text-sm">Click on a zone marker to view detailed information</p>
                    </div>
                </div>

                <!-- Smart Alerts & Recommendations -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-base font-bold text-gray-800 mb-3">‚ö†Ô∏è Active Alerts</h3>
                    <div id="alertsContainer" class="space-y-2 mb-4">
                        <!-- Dynamic alerts will be populated here -->
                    </div>
                    
                    <h3 class="text-base font-bold text-gray-800 mb-3">üí° Smart Recommendations</h3>
                    <div id="recommendationsContainer" class="space-y-2">
                        <!-- Dynamic recommendations will be populated here -->
                    </div>
                    
                    <!-- Alert Settings -->
                    <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                        <h4 class="font-medium text-gray-800 mb-2 text-sm">üîî Alert Thresholds</h4>
                        <div class="space-y-2 text-xs">
                            <div class="flex justify-between items-center">
                                <span>AQI Alert Level:</span>
                                <input type="range" id="aqiThreshold" min="50" max="200" value="150" class="w-16">
                                <span id="aqiValue">150</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span>Temperature Alert (¬∞C):</span>
                                <input type="range" id="tempThreshold" min="30" max="50" value="40" class="w-16">
                                <span id="tempValue">40</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Environmental Photo Contest -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-base font-bold text-gray-800 mb-3 flex items-center">
                        <span class="floating-icon mr-2">üì∏</span>
                        Photo Contest
                    </h3>
                    
                    <!-- Contest Theme -->
                    <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-3 rounded-lg mb-3">
                        <div class="text-sm font-bold text-purple-800">üèÜ This Week's Theme:</div>
                        <div class="text-xs text-purple-600">"Green Spaces in Urban Areas"</div>
                        <div class="text-xs text-purple-500 mt-1">Prize: ‚Çπ5,000 + Recognition</div>
                    </div>
                    
                    <!-- Top 3 Contest Photos -->
                    <div class="space-y-2 mb-3">
                        <div class="flex items-center space-x-2 p-2 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="relative">
                                <div class="w-12 h-12 rounded-lg overflow-hidden" style="background: linear-gradient(45deg, #22c55e, #10b981);">
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <span class="text-white text-lg">üå≥</span>
                                    </div>
                                </div>
                                <div class="absolute -top-1 -right-1 bg-yellow-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">1</div>
                            </div>
                            <div class="flex-1">
                                <div class="text-xs font-bold text-gray-800">Central Park Morning</div>
                                <div class="text-xs text-gray-600">by @naturelover_delhi</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <span class="text-xs">‚ù§Ô∏è 247</span>
                                    <span class="text-xs">üí¨ 23</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded-lg">
                            <div class="relative">
                                <div class="w-12 h-12 rounded-lg overflow-hidden" style="background: linear-gradient(45deg, #3b82f6, #2563eb);">
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <span class="text-white text-lg">üåø</span>
                                    </div>
                                </div>
                                <div class="absolute -top-1 -right-1 bg-gray-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">2</div>
                            </div>
                            <div class="flex-1">
                                <div class="text-xs font-bold text-gray-800">Rooftop Garden</div>
                                <div class="text-xs text-gray-600">by @eco_warrior</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <span class="text-xs">‚ù§Ô∏è 189</span>
                                    <span class="text-xs">üí¨ 15</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-2 p-2 bg-orange-50 rounded-lg">
                            <div class="relative">
                                <div class="w-12 h-12 rounded-lg overflow-hidden" style="background: linear-gradient(45deg, #f59e0b, #d97706);">
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <span class="text-white text-lg">üå∫</span>
                                    </div>
                                </div>
                                <div class="absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">3</div>
                            </div>
                            <div class="flex-1">
                                <div class="text-xs font-bold text-gray-800">Street Flowers</div>
                                <div class="text-xs text-gray-600">by @citybloom</div>
                                <div class="flex items-center space-x-1 mt-1">
                                    <span class="text-xs">‚ù§Ô∏è 156</span>
                                    <span class="text-xs">üí¨ 12</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contest Actions -->
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="submitPhoto()" class="bg-green-500 text-white py-2 px-3 rounded-lg hover:bg-green-600 transition-colors text-xs font-medium">
                            üì§ Submit Photo
                        </button>
                        <button onclick="viewGallery()" class="bg-blue-500 text-white py-2 px-3 rounded-lg hover:bg-blue-600 transition-colors text-xs font-medium">
                            üñºÔ∏è View Gallery
                        </button>
                    </div>
                    
                    <!-- Contest Stats -->
                    <div class="mt-3 p-2 bg-gray-50 rounded-lg">
                        <div class="text-xs font-bold mb-1">Contest Stats</div>
                        <div class="grid grid-cols-3 gap-2 text-xs text-center">
                            <div>
                                <div class="font-bold text-green-600" id="totalSubmissions">127</div>
                                <div class="text-gray-600">Submissions</div>
                            </div>
                            <div>
                                <div class="font-bold text-blue-600" id="totalVotes">2.4K</div>
                                <div class="text-gray-600">Votes</div>
                            </div>
                            <div>
                                <div class="font-bold text-purple-600" id="daysLeft">3</div>
                                <div class="text-gray-600">Days Left</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Citizen Reporting System -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-base font-bold text-gray-800 mb-3">üì± Citizen Reports</h3>
                    <div class="grid grid-cols-1 gap-2">
                        <button onclick="reportPollution()" class="w-full bg-red-500 text-white py-2 px-3 rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center text-sm">
                            <span class="mr-2">üè≠</span> Report Pollution
                        </button>
                        <button onclick="reportGreenSpace()" class="w-full bg-green-500 text-white py-2 px-3 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center text-sm">
                            <span class="mr-2">üå≥</span> Report Green Space
                        </button>
                        <button onclick="reportHealthIssue()" class="w-full bg-orange-500 text-white py-2 px-3 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center text-sm">
                            <span class="mr-2">üè•</span> Health Concern
                        </button>
                    </div>
                    
                    <!-- Recent Reports -->
                    <div class="mt-3 p-2 bg-gray-50 rounded-lg">
                        <div class="text-xs font-bold mb-2">Recent Reports</div>
                        <div class="space-y-1 text-xs">
                            <div class="flex justify-between items-center">
                                <span>üè≠ Industrial smoke</span>
                                <span class="text-red-600 font-bold">5m</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span>üå≥ New park opened</span>
                                <span class="text-green-600 font-bold">12m</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span>üöó Traffic congestion</span>
                                <span class="text-orange-600 font-bold">18m</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Health Impact Calculator -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-base font-bold text-gray-800 mb-3">üßÆ Health Calculator</h3>
                    <div class="space-y-2">
                        <div>
                            <label class="text-xs text-gray-600">Age Group:</label>
                            <select id="ageGroup" class="w-full mt-1 p-1 border rounded text-xs">
                                <option value="child">Child (0-12)</option>
                                <option value="teen">Teen (13-17)</option>
                                <option value="adult" selected>Adult (18-64)</option>
                                <option value="senior">Senior (65+)</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-xs text-gray-600">Health Condition:</label>
                            <select id="healthCondition" class="w-full mt-1 p-1 border rounded text-xs">
                                <option value="healthy" selected>Healthy</option>
                                <option value="asthma">Asthma</option>
                                <option value="heart">Heart Disease</option>
                                <option value="diabetes">Diabetes</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-xs text-gray-600">Outdoor Time:</label>
                            <input type="range" id="outdoorTime" min="0" max="12" value="4" class="w-full mt-1">
                            <div class="text-center text-xs text-gray-500" id="outdoorTimeValue">4 hours</div>
                        </div>
                        <button onclick="calculateHealthImpact()" class="w-full bg-purple-500 text-white py-2 px-3 rounded-lg hover:bg-purple-600 transition-colors text-sm">
                            Calculate Risk
                        </button>
                        <div id="healthRiskResult" class="mt-2 p-2 bg-blue-50 rounded-lg hidden">
                            <div class="text-xs text-blue-800">
                                <strong>Risk Level:</strong> <span id="riskLevel">Moderate</span><br>
                                <strong>Recommendation:</strong> <span id="riskRecommendation">Limit outdoor activities during peak pollution hours</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="text-base font-bold text-gray-800 mb-3">‚ö° Quick Actions</h3>
                    <div class="grid grid-cols-1 gap-2">
                        <button onclick="generateReport()" class="w-full bg-blue-500 text-white py-2 px-3 rounded-lg hover:bg-blue-600 transition-colors text-sm">
                            üìä Generate Report
                        </button>
                        <button onclick="shareData()" class="w-full bg-green-500 text-white py-2 px-3 rounded-lg hover:bg-green-600 transition-colors text-sm">
                            üì§ Share Data
                        </button>
                        <button onclick="setAlert()" class="w-full bg-orange-500 text-white py-2 px-3 rounded-lg hover:bg-orange-600 transition-colors text-sm">
                            üîî Set Alert
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="gradient-bg text-white mt-12">
        <div class="container mx-auto px-4 py-12">
            <!-- Main Footer Content -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                <!-- About Section -->
                <div class="space-y-4">
                    <div class="flex items-center space-x-3">
                        <div class="city-photo environmental-bg floating-icon" style="background-image: linear-gradient(45deg, #22c55e, #3b82f6, #fbbf24, #ef4444); width: 40px; height: 40px;"></div>
                        <h3 class="text-xl font-bold neon-glow">Smart City Health</h3>
                    </div>
                    <p class="text-sm opacity-90 leading-relaxed">
                        Empowering citizens with real-time environmental health data powered by NASA Earth Observatory and advanced AI predictions for healthier urban living.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white hover:text-yellow-300 transition-colors floating-icon">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                        <a href="#" class="text-white hover:text-blue-300 transition-colors floating-icon">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                            </svg>
                        </a>
                        <a href="#" class="text-white hover:text-green-300 transition-colors floating-icon">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
                            </svg>
                        </a>
                        <a href="#" class="text-white hover:text-red-300 transition-colors floating-icon">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="space-y-4">
                    <h3 class="text-lg font-bold neon-glow">üîó Quick Links</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="opacity-90 hover:text-yellow-300 transition-colors hover:translate-x-1 transform inline-block">üìä Live Dashboard</a></li>
                        <li><a href="#" class="opacity-90 hover:text-yellow-300 transition-colors hover:translate-x-1 transform inline-block">üó∫Ô∏è Interactive Maps</a></li>
                        <li><a href="#" class="opacity-90 hover:text-yellow-300 transition-colors hover:translate-x-1 transform inline-block">üìà Health Analytics</a></li>
                        <li><a href="#" class="opacity-90 hover:text-yellow-300 transition-colors hover:translate-x-1 transform inline-block">ü§ñ AI Predictions</a></li>
                        <li><a href="#" class="opacity-90 hover:text-yellow-300 transition-colors hover:translate-x-1 transform inline-block">üì± Mobile App</a></li>
                        <li><a href="#" class="opacity-90 hover:text-yellow-300 transition-colors hover:translate-x-1 transform inline-block">üìã Reports & Data</a></li>
                    </ul>
                </div>

                <!-- Resources -->
                <div class="space-y-4">
                    <h3 class="text-lg font-bold neon-glow">üìö Resources</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="opacity-90 hover:text-green-300 transition-colors hover:translate-x-1 transform inline-block">üè• Health Guidelines</a></li>
                        <li><a href="#" class="opacity-90 hover:text-green-300 transition-colors hover:translate-x-1 transform inline-block">üåø Environmental Tips</a></li>
                        <li><a href="#" class="opacity-90 hover:text-green-300 transition-colors hover:translate-x-1 transform inline-block">üìñ Research Papers</a></li>
                        <li><a href="#" class="opacity-90 hover:text-green-300 transition-colors hover:translate-x-1 transform inline-block">üéì Educational Content</a></li>
                        <li><a href="#" class="opacity-90 hover:text-green-300 transition-colors hover:translate-x-1 transform inline-block">üìû Emergency Contacts</a></li>
                        <li><a href="#" class="opacity-90 hover:text-green-300 transition-colors hover:translate-x-1 transform inline-block">‚ùì FAQ & Support</a></li>
                    </ul>
                </div>

                <!-- Contact & Support -->
                <div class="space-y-4">
                    <h3 class="text-lg font-bold neon-glow">üìû Contact & Support</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-center space-x-2">
                            <span class="floating-icon">üìß</span>
                            <a href="mailto:support@smartcityhealth.gov" class="opacity-90 hover:text-blue-300 transition-colors">support@smartcityhealth.gov</a>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="pulse-animation">üì±</span>
                            <a href="tel:+911234567890" class="opacity-90 hover:text-blue-300 transition-colors">+91 123 456 7890</a>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="floating-icon">üö®</span>
                            <a href="tel:112" class="opacity-90 hover:text-red-300 transition-colors font-bold">Emergency: 112</a>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="floating-icon">üè¢</span>
                            <span class="opacity-90">Ministry of Environment<br>New Delhi, India</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Sources & Partners -->
            <div class="border-t border-white border-opacity-20 pt-8 mb-8">
                <h3 class="text-lg font-bold mb-4 text-center neon-glow">ü§ù Data Sources & Partners</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 items-center">
                    <div class="text-center">
                        <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-2 floating-icon">
                            <span class="text-2xl">üõ∞Ô∏è</span>
                        </div>
                        <div class="text-xs opacity-90">NASA Earth Observatory</div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-2 floating-icon">
                            <span class="text-2xl">üåç</span>
                        </div>
                        <div class="text-xs opacity-90">WHO Global Health</div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-2 pulse-animation">
                            <span class="text-2xl">üèõÔ∏è</span>
                        </div>
                        <div class="text-xs opacity-90">Govt. of India</div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-2 floating-icon">
                            <span class="text-2xl">üå°Ô∏è</span>
                        </div>
                        <div class="text-xs opacity-90">IMD Weather</div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-2 floating-icon">
                            <span class="text-2xl">üî¨</span>
                        </div>
                        <div class="text-xs opacity-90">CSIR Labs</div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-2 pulse-animation">
                            <span class="text-2xl">üè•</span>
                        </div>
                        <div class="text-xs opacity-90">AIIMS Research</div>
                    </div>
                </div>
            </div>

            <!-- Live Statistics Bar -->
            <div class="bg-white bg-opacity-10 rounded-xl p-6 mb-8">
                <h3 class="text-lg font-bold mb-4 text-center neon-glow">üìä Live Platform Statistics</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                    <div>
                        <div class="text-3xl font-bold text-yellow-300 mb-1" id="totalUsers">2.4M+</div>
                        <div class="text-sm opacity-90">Active Users</div>
                        <div class="text-xs opacity-70 pulse-animation">üî¥ LIVE</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-green-300 mb-1" id="citiesCovered">47</div>
                        <div class="text-sm opacity-90">Cities Covered</div>
                        <div class="text-xs opacity-70">üåç Growing</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-blue-300 mb-1" id="dataPoints">15.2M</div>
                        <div class="text-sm opacity-90">Data Points</div>
                        <div class="text-xs opacity-70">üìà Daily</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-purple-300 mb-1" id="alertsSent">892K</div>
                        <div class="text-sm opacity-90">Alerts Sent</div>
                        <div class="text-xs opacity-70">‚ö° This Month</div>
                    </div>
                </div>
            </div>

            <!-- Newsletter Signup -->
            <div class="bg-white bg-opacity-10 rounded-xl p-6 mb-8">
                <div class="text-center mb-4">
                    <h3 class="text-lg font-bold neon-glow">üì¨ Stay Updated</h3>
                    <p class="text-sm opacity-90 mt-2">Get weekly health insights and environmental alerts delivered to your inbox</p>
                </div>
                <form class="flex flex-col md:flex-row gap-3 max-w-md mx-auto" onsubmit="subscribeNewsletter(event)">
                    <input type="email" placeholder="Enter your email address" 
                           class="flex-1 px-4 py-2 rounded-lg text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-300"
                           required>
                    <button type="submit" 
                            class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold px-6 py-2 rounded-lg transition-all transform hover:scale-105 floating-icon">
                        Subscribe üìß
                    </button>
                </form>
                <div class="text-center mt-3">
                    <div class="text-xs opacity-70">
                        <span class="pulse-animation">üîí</span> Your privacy is protected. Unsubscribe anytime.
                    </div>
                </div>
            </div>

            <!-- Bottom Footer -->
            <div class="border-t border-white border-opacity-20 pt-6">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-sm opacity-90">
                        <span class="floating-icon">¬©</span> 2024 Smart City Health Dashboard. 
                        <span class="neon-glow">Powered by AI & Satellite Technology</span>
                    </div>
                    <div class="flex flex-wrap gap-4 text-sm">
                        <a href="#" class="opacity-90 hover:text-yellow-300 transition-colors">Privacy Policy</a>
                        <span class="opacity-50">|</span>
                        <a href="#" class="opacity-90 hover:text-yellow-300 transition-colors">Terms of Service</a>
                        <span class="opacity-50">|</span>
                        <a href="#" class="opacity-90 hover:text-yellow-300 transition-colors">Data Usage</a>
                        <span class="opacity-50">|</span>
                        <a href="#" class="opacity-90 hover:text-yellow-300 transition-colors">Accessibility</a>
                    </div>
                </div>
                
                <!-- Version & Status -->
                <div class="text-center mt-4 pt-4 border-t border-white border-opacity-10">
                    <div class="text-xs opacity-70 space-x-4">
                        <span>Version 2.1.4</span>
                        <span class="pulse-animation">üü¢ All Systems Operational</span>
                        <span>Last Updated: <span id="lastSystemUpdate">2 minutes ago</span></span>
                        <span>Next Update: <span id="nextUpdate">In 3 minutes</span></span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Sample data for different cities
        const cityData = {
            delhi: { 
                healthIndex: 72, aqi: 156, temp: 38, green: 23,
                coords: [28.6139, 77.2090],
                zones: [
                    { name: 'Central Delhi', lat: 28.6500, lng: 77.2300, aqi: 180, temp: 42, green: 15, population: 500000 },
                    { name: 'South Delhi', lat: 28.5500, lng: 77.2500, aqi: 120, temp: 35, green: 35, population: 800000 },
                    { name: 'Green Belt', lat: 28.7000, lng: 77.1500, aqi: 80, temp: 28, green: 65, population: 200000 },
                    { name: 'Industrial Area', lat: 28.6200, lng: 77.3000, aqi: 220, temp: 45, green: 8, population: 300000 },
                    { name: 'Residential', lat: 28.5800, lng: 77.1800, aqi: 110, temp: 33, green: 40, population: 600000 }
                ]
            },
            mumbai: { 
                healthIndex: 68, aqi: 142, temp: 32, green: 28,
                coords: [19.0760, 72.8777],
                zones: [
                    { name: 'South Mumbai', lat: 18.9200, lng: 72.8300, aqi: 130, temp: 30, green: 25, population: 400000 },
                    { name: 'Bandra', lat: 19.0500, lng: 72.8300, aqi: 140, temp: 32, green: 30, population: 350000 },
                    { name: 'Andheri', lat: 19.1200, lng: 72.8500, aqi: 160, temp: 35, green: 20, population: 700000 }
                ]
            },
            bangalore: { 
                healthIndex: 78, aqi: 98, temp: 26, green: 45,
                coords: [12.9716, 77.5946],
                zones: [
                    { name: 'Whitefield', lat: 12.9698, lng: 77.7500, aqi: 85, temp: 24, green: 50, population: 300000 },
                    { name: 'Koramangala', lat: 12.9279, lng: 77.6271, aqi: 95, temp: 26, green: 45, population: 250000 },
                    { name: 'Electronic City', lat: 12.8456, lng: 77.6603, aqi: 110, temp: 28, green: 40, population: 400000 }
                ]
            },
            chennai: { 
                healthIndex: 75, aqi: 118, temp: 35, green: 32,
                coords: [13.0827, 80.2707],
                zones: [
                    { name: 'T. Nagar', lat: 13.0418, lng: 80.2341, aqi: 125, temp: 36, green: 25, population: 450000 },
                    { name: 'Anna Nagar', lat: 13.0850, lng: 80.2101, aqi: 105, temp: 34, green: 40, population: 350000 },
                    { name: 'OMR', lat: 12.9249, lng: 80.2270, aqi: 120, temp: 35, green: 35, population: 500000 }
                ]
            }
        };

        let currentFilter = 'all';
        let mainChart;
        let map;
        let currentChartType = 'trend';
        let alertThresholds = { aqi: 150, temp: 40 };
        let heatmapEnabled = false;
        let is3DEnabled = false;
        let weatherUpdateInterval;
        let sensorUpdateInterval;

        // Initialize the dashboard
        function initDashboard() {
            updateCityData();
            initMap();
            initChart();
            updateAlerts();
            updateRecommendations();
            setupAlertThresholds();
            setupHealthCalculator();
            startLiveUpdates();
            showRandomAlert();
        }

        // Start live data updates
        function startLiveUpdates() {
            // Update weather data every 30 seconds
            weatherUpdateInterval = setInterval(updateLiveWeather, 30000);
            
            // Update sensor data every 10 seconds
            sensorUpdateInterval = setInterval(updateSensorData, 10000);
            
            // Update AI predictions every 5 minutes
            setInterval(updateAIPredictions, 300000);
        }

        // Update live weather data
        function updateLiveWeather() {
            const city = document.getElementById('citySelect').value;
            const baseData = cityData[city];
            
            // Simulate live weather variations
            const tempVariation = (Math.random() - 0.5) * 4; // ¬±2¬∞C variation
            const windVariation = Math.random() * 8 + 8; // 8-16 km/h
            const humidityVariation = Math.random() * 20 + 60; // 60-80%
            const visibilityVariation = Math.random() * 5 + 5; // 5-10 km
            
            document.getElementById('liveTemp').textContent = Math.round(baseData.temp + tempVariation) + '¬∞C';
            document.getElementById('windSpeed').textContent = Math.round(windVariation) + ' km/h';
            document.getElementById('humidity').textContent = Math.round(humidityVariation) + '%';
            document.getElementById('visibility').textContent = Math.round(visibilityVariation) + ' km';
        }

        // Update sensor statistics
        function updateSensorData() {
            const activeSensors = Math.floor(Math.random() * 10) + 42; // 42-52 sensors
            const dataPoints = Math.floor(Math.random() * 200) + 1200; // 1200-1400 points
            
            document.getElementById('activeSensors').textContent = activeSensors;
            document.getElementById('dataPoints').textContent = dataPoints.toLocaleString();
            
            // Update quick stats panel
            document.getElementById('quickSensors').textContent = activeSensors;
            document.getElementById('quickDataPoints').textContent = dataPoints.toLocaleString();
            
            // Update last update time
            const now = new Date();
            const minutes = Math.floor(Math.random() * 5) + 1; // 1-5 minutes ago
            document.getElementById('lastUpdate').textContent = minutes + ' min ago';
            document.getElementById('quickLastUpdate').textContent = minutes + ' min ago';
        }

        // Update AI predictions
        function updateAIPredictions() {
            const predictions = [
                { period: '6h', risks: ['Low Risk', 'Moderate Risk', 'High Risk'], insights: ['Clear skies expected', 'Pollution may increase', 'Storm approaching'] },
                { period: '24h', risks: ['Moderate Risk', 'High Risk', 'Very High Risk'], insights: ['Temperature rising', 'Air quality declining', 'Heat wave warning'] },
                { period: 'week', risks: ['Improving', 'Stable', 'Worsening'], insights: ['Monsoon season helps', 'Steady conditions', 'Industrial activity up'] }
            ];
            
            const city = document.getElementById('citySelect').value;
            const cityAQI = cityData[city].aqi;
            
            // Generate predictions based on current conditions
            let prediction6h, prediction24h, predictionWeek, insight;
            
            if (cityAQI > 150) {
                prediction6h = 'High Risk';
                prediction24h = 'Very High Risk';
                predictionWeek = 'Worsening';
                insight = 'Critical pollution levels detected. Immediate action recommended for sensitive groups.';
            } else if (cityAQI > 100) {
                prediction6h = 'Moderate Risk';
                prediction24h = 'High Risk';
                predictionWeek = 'Stable';
                insight = 'Air quality expected to remain moderate. Monitor for changes in wind patterns.';
            } else {
                prediction6h = 'Low Risk';
                prediction24h = 'Moderate Risk';
                predictionWeek = 'Improving';
                insight = 'Good air quality conditions. Perfect time for outdoor activities and exercise.';
            }
            
            document.getElementById('prediction6h').textContent = prediction6h;
            document.getElementById('prediction24h').textContent = prediction24h;
            document.getElementById('predictionWeek').textContent = predictionWeek;
            document.getElementById('aiInsight').textContent = insight;
        }

        // Initialize interactive map
        function initMap() {
            const city = document.getElementById('citySelect').value;
            const cityInfo = cityData[city];
            
            // Initialize map
            if (map) {
                map.remove();
            }
            
            map = L.map('map').setView(cityInfo.coords, 11);
            
            // Add tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            // Add zone markers
            cityInfo.zones.forEach(zone => {
                const color = getHealthColor(zone.aqi);
                const marker = L.circleMarker([zone.lat, zone.lng], {
                    color: 'white',
                    fillColor: color,
                    fillOpacity: 0.8,
                    radius: Math.sqrt(zone.population / 10000),
                    weight: 2
                }).addTo(map);
                
                // Create popup content
                const popupContent = `
                    <div class="p-2">
                        <h4 class="font-bold text-lg">${zone.name}</h4>
                        <div class="space-y-1 text-sm">
                            <div><strong>AQI:</strong> ${zone.aqi} (${getHealthStatus(zone.aqi)})</div>
                            <div><strong>Temperature:</strong> ${zone.temp}¬∞C</div>
                            <div><strong>Green Cover:</strong> ${zone.green}%</div>
                            <div><strong>Population:</strong> ${zone.population.toLocaleString()}</div>
                        </div>
                        <div class="mt-2 text-xs text-gray-600">
                            Click for detailed recommendations
                        </div>
                    </div>
                `;
                
                marker.bindPopup(popupContent);
                marker.on('click', () => {
                    showZoneInfo(zone.name, getHealthStatus(zone.aqi), zone.aqi, zone.temp, zone.green);
                });
            });
        }

        // Get health color based on AQI
        function getHealthColor(aqi) {
            if (aqi <= 50) return '#22c55e';      // Green - Good
            if (aqi <= 100) return '#eab308';    // Yellow - Moderate  
            if (aqi <= 150) return '#f97316';    // Orange - Unhealthy for sensitive
            if (aqi <= 200) return '#ef4444';    // Red - Unhealthy
            return '#991b1b';                     // Dark Red - Hazardous
        }

        // Get health status text
        function getHealthStatus(aqi) {
            if (aqi <= 50) return 'Good';
            if (aqi <= 100) return 'Moderate';
            if (aqi <= 150) return 'Unhealthy for Sensitive';
            if (aqi <= 200) return 'Unhealthy';
            return 'Hazardous';
        }

        // Update city data when selection changes
        function updateCityData() {
            const city = document.getElementById('citySelect').value;
            const data = cityData[city];
            
            document.getElementById('healthIndex').textContent = data.healthIndex;
            document.getElementById('airQuality').textContent = data.aqi;
            document.getElementById('temperature').textContent = data.temp + '¬∞C';
            document.getElementById('greenCover').textContent = data.green + '%';
            
            // Update map and alerts when city changes
            if (map) {
                initMap();
            }
            updateAlerts();
            updateRecommendations();
        }

        // Switch between different chart types
        function switchChart(type) {
            currentChartType = type;
            
            // Update button styles
            document.querySelectorAll('.chart-btn').forEach(btn => {
                btn.className = 'chart-btn bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm';
            });
            document.getElementById(type + 'Btn').className = 'chart-btn bg-blue-500 text-white px-3 py-1 rounded text-sm';
            
            // Update chart
            updateChart();
        }

        // Set data filter
        function setFilter(filter) {
            currentFilter = filter;
            
            // Update button styles
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.className = 'filter-btn bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors';
            });
            
            event.target.className = 'filter-btn bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors';
            
            // Update chart based on filter
            updateChart();
        }

        // Show zone information
        function showZoneInfo(name, risk, aqi, temp, green) {
            const riskColors = {
                'Low': 'text-green-600',
                'Medium': 'text-yellow-600', 
                'High': 'text-red-600',
                'Very High': 'text-red-800'
            };
            
            document.getElementById('zoneInfo').innerHTML = `
                <h3 class="text-lg font-bold text-gray-800 mb-4">üìç ${name}</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Risk Level:</span>
                        <span class="font-bold ${riskColors[risk]}">${risk}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">AQI:</span>
                        <span class="font-bold">${aqi}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Temperature:</span>
                        <span class="font-bold">${temp}¬∞C</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Green Cover:</span>
                        <span class="font-bold">${green}%</span>
                    </div>
                    <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                        <div class="text-sm text-blue-800">
                            <strong>Recommendation:</strong> 
                            ${risk === 'High' || risk === 'Very High' ? 
                              'Avoid outdoor activities. Use air purifiers indoors.' : 
                              'Good for outdoor activities. Maintain current green initiatives.'}
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize enhanced chart system
        function initChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            mainChart = new Chart(ctx, {
                type: 'line',
                data: getTrendData(),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
        }

        // Get data for different chart types
        function getTrendData() {
            return {
                labels: ['7 days ago', '6 days ago', '5 days ago', '4 days ago', '3 days ago', '2 days ago', 'Yesterday', 'Today'],
                datasets: [{
                    label: 'Air Quality Index',
                    data: [180, 165, 142, 158, 171, 149, 156, 156],
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    tension: 0.4
                }, {
                    label: 'Temperature (¬∞C)',
                    data: [35, 37, 39, 38, 36, 40, 39, 38],
                    borderColor: '#f97316',
                    backgroundColor: 'rgba(249, 115, 22, 0.1)',
                    tension: 0.4
                }, {
                    label: 'Green Cover (%)',
                    data: [23, 23, 24, 23, 23, 24, 23, 23],
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    tension: 0.4
                }]
            };
        }

        function getComparisonData() {
            return {
                labels: ['Delhi', 'Mumbai', 'Bangalore', 'Chennai'],
                datasets: [{
                    label: 'Health Index',
                    data: [72, 68, 78, 75],
                    backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444']
                }, {
                    label: 'AQI',
                    data: [156, 142, 98, 118],
                    backgroundColor: ['#ef4444', '#f97316', '#eab308', '#f97316']
                }]
            };
        }

        function getExposureData() {
            const city = document.getElementById('citySelect').value;
            const zones = cityData[city].zones;
            
            return {
                labels: zones.map(z => z.name),
                datasets: [{
                    label: 'Population at Risk (thousands)',
                    data: zones.map(z => Math.round((z.population * (z.aqi > 100 ? 0.8 : z.aqi > 50 ? 0.4 : 0.1)) / 1000)),
                    backgroundColor: zones.map(z => getHealthColor(z.aqi)),
                    borderColor: '#ffffff',
                    borderWidth: 2
                }]
            };
        }

        // Update chart based on current type and filter
        function updateChart() {
            if (!mainChart) return;
            
            let newData, newType = 'line', insights = '';
            
            switch (currentChartType) {
                case 'trend':
                    newData = getTrendData();
                    newType = 'line';
                    insights = 'üìä Insight: Air quality shows declining trend over past week. Temperature rising above safe levels.';
                    break;
                case 'comparison':
                    newData = getComparisonData();
                    newType = 'bar';
                    insights = 'üìä Insight: Bangalore has the best health index (78) while Mumbai has the lowest (68). Delhi shows highest AQI concern.';
                    break;
                case 'exposure':
                    newData = getExposureData();
                    newType = 'doughnut';
                    insights = 'üìä Insight: High-risk zones expose 60% of population to unhealthy air quality. Immediate action needed in industrial areas.';
                    break;
            }
            
            // Apply filter for trend chart
            if (currentChartType === 'trend' && currentFilter !== 'all') {
                const datasets = newData.datasets;
                if (currentFilter === 'air') {
                    datasets[1].hidden = true;
                    datasets[2].hidden = true;
                } else if (currentFilter === 'temp') {
                    datasets[0].hidden = true;
                    datasets[2].hidden = true;
                } else if (currentFilter === 'green') {
                    datasets[0].hidden = true;
                    datasets[1].hidden = true;
                }
            }
            
            mainChart.destroy();
            const ctx = document.getElementById('mainChart').getContext('2d');
            mainChart = new Chart(ctx, {
                type: newType,
                data: newData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: newType === 'doughnut' ? {} : {
                        y: { beginAtZero: true }
                    },
                    plugins: {
                        legend: { position: 'top' }
                    }
                }
            });
            
            document.getElementById('chartInsights').innerHTML = `
                <div class="text-sm text-blue-800">
                    <strong>${insights}</strong>
                </div>
            `;
        }

        // Update alerts based on current city data
        function updateAlerts() {
            const city = document.getElementById('citySelect').value;
            const data = cityData[city];
            const alerts = [];
            
            // Check AQI alerts
            if (data.aqi > alertThresholds.aqi) {
                alerts.push({
                    type: 'danger',
                    icon: 'üö®',
                    title: 'High Air Pollution Alert',
                    message: `AQI level ${data.aqi} exceeds safe threshold. Avoid outdoor activities.`,
                    action: 'Stay indoors, use air purifiers'
                });
            }
            
            // Check temperature alerts
            if (data.temp > alertThresholds.temp) {
                alerts.push({
                    type: 'warning',
                    icon: 'üå°Ô∏è',
                    title: 'Extreme Heat Warning',
                    message: `Temperature ${data.temp}¬∞C is dangerously high. Heat stroke risk elevated.`,
                    action: 'Stay hydrated, avoid sun exposure 12-4 PM'
                });
            }
            
            // Check green cover alerts
            if (data.green < 30) {
                alerts.push({
                    type: 'info',
                    icon: 'üåø',
                    title: 'Low Green Cover Notice',
                    message: `Only ${data.green}% green cover. Urban heat island effect likely.`,
                    action: 'Support tree planting initiatives'
                });
            }
            
            // Render alerts
            const container = document.getElementById('alertsContainer');
            if (alerts.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4 text-gray-500">
                        <div class="text-2xl mb-2">‚úÖ</div>
                        <div class="text-sm">No active health alerts for ${city.charAt(0).toUpperCase() + city.slice(1)}</div>
                    </div>
                `;
            } else {
                container.innerHTML = alerts.map(alert => `
                    <div class="alert-item p-3 rounded-lg border-l-4 ${
                        alert.type === 'danger' ? 'bg-red-50 border-red-500' :
                        alert.type === 'warning' ? 'bg-orange-50 border-orange-500' :
                        'bg-blue-50 border-blue-500'
                    }">
                        <div class="flex items-start space-x-3">
                            <span class="text-xl">${alert.icon}</span>
                            <div class="flex-1">
                                <div class="font-medium ${
                                    alert.type === 'danger' ? 'text-red-800' :
                                    alert.type === 'warning' ? 'text-orange-800' :
                                    'text-blue-800'
                                }">${alert.title}</div>
                                <div class="text-sm ${
                                    alert.type === 'danger' ? 'text-red-600' :
                                    alert.type === 'warning' ? 'text-orange-600' :
                                    'text-blue-600'
                                } mt-1">${alert.message}</div>
                                <div class="text-xs ${
                                    alert.type === 'danger' ? 'text-red-500' :
                                    alert.type === 'warning' ? 'text-orange-500' :
                                    'text-blue-500'
                                } mt-2 font-medium">üí° ${alert.action}</div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Update recommendations based on city data
        function updateRecommendations() {
            const city = document.getElementById('citySelect').value;
            const data = cityData[city];
            const zones = data.zones;
            const recommendations = [];
            
            // AQI-based recommendations
            if (data.aqi > 150) {
                recommendations.push({
                    icon: 'üå±',
                    title: 'Emergency Tree Planting',
                    description: `Plant 1000+ trees in high-pollution zones. Focus on ${zones.find(z => z.aqi > 180)?.name || 'industrial areas'}.`,
                    priority: 'high'
                });
                
                recommendations.push({
                    icon: 'üöå',
                    title: 'Public Transport Boost',
                    description: 'Increase metro/bus frequency by 50% to reduce vehicle emissions during peak hours.',
                    priority: 'high'
                });
            }
            
            // Temperature-based recommendations
            if (data.temp > 35) {
                recommendations.push({
                    icon: 'üè¢',
                    title: 'Cool Roof Initiative',
                    description: 'Mandate white/reflective roofs for all buildings to reduce urban heat island effect.',
                    priority: 'medium'
                });
            }
            
            // Green cover recommendations
            if (data.green < 35) {
                recommendations.push({
                    icon: 'üå≥',
                    title: 'Vertical Gardens',
                    description: 'Install vertical gardens on building walls in dense areas to increase green cover by 15%.',
                    priority: 'medium'
                });
            }
            
            // Zone-specific recommendations
            const worstZone = zones.reduce((worst, zone) => zone.aqi > worst.aqi ? zone : worst);
            recommendations.push({
                icon: '‚ö°',
                title: 'Clean Energy Transition',
                description: `Install solar panels in ${worstZone.name} to reduce fossil fuel dependency by 30%.`,
                priority: 'low'
            });
            
            // Render recommendations
            const container = document.getElementById('recommendationsContainer');
            container.innerHTML = recommendations.map(rec => `
                <div class="recommendation-item bg-${
                    rec.priority === 'high' ? 'red' : rec.priority === 'medium' ? 'orange' : 'green'
                }-50 p-3 rounded-lg border-l-4 border-${
                    rec.priority === 'high' ? 'red' : rec.priority === 'medium' ? 'orange' : 'green'
                }-500">
                    <div class="flex items-start space-x-3">
                        <span class="text-xl">${rec.icon}</span>
                        <div class="flex-1">
                            <div class="font-medium text-${
                                rec.priority === 'high' ? 'red' : rec.priority === 'medium' ? 'orange' : 'green'
                            }-800">${rec.title}</div>
                            <div class="text-sm text-${
                                rec.priority === 'high' ? 'red' : rec.priority === 'medium' ? 'orange' : 'green'
                            }-600 mt-1">${rec.description}</div>
                            <div class="text-xs text-${
                                rec.priority === 'high' ? 'red' : rec.priority === 'medium' ? 'orange' : 'green'
                            }-500 mt-1 font-medium">Priority: ${rec.priority.toUpperCase()}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Setup alert threshold controls
        function setupAlertThresholds() {
            const aqiSlider = document.getElementById('aqiThreshold');
            const tempSlider = document.getElementById('tempThreshold');
            const aqiValue = document.getElementById('aqiValue');
            const tempValue = document.getElementById('tempValue');
            
            aqiSlider.addEventListener('input', (e) => {
                alertThresholds.aqi = parseInt(e.target.value);
                aqiValue.textContent = e.target.value;
                updateAlerts();
            });
            
            tempSlider.addEventListener('input', (e) => {
                alertThresholds.temp = parseInt(e.target.value);
                tempValue.textContent = e.target.value;
                updateAlerts();
            });
        }

        // Time slider functionality
        document.getElementById('timeSlider').addEventListener('input', function(e) {
            const daysAgo = 30 - parseInt(e.target.value);
            const date = new Date();
            date.setDate(date.getDate() - daysAgo);
            
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            document.getElementById('currentDate').textContent = 
                daysAgo === 0 ? 'Today - ' + date.toLocaleDateString('en-US', options) : 
                `${daysAgo} days ago - ` + date.toLocaleDateString('en-US', options);
        });

        // City selection change
        document.getElementById('citySelect').addEventListener('change', () => {
            updateCityData();
            if (currentChartType === 'exposure') {
                updateChart(); // Refresh exposure chart for new city
            }
        });

        // Show random health alerts
        function showRandomAlert() {
            const alerts = [
                "Delhi: Air Pollution High ‚Äì Wear mask outside!",
                "Heat Wave Alert: Avoid outdoor activities 12-4 PM",
                "Good Air Quality Today ‚Äì Perfect for morning jog!",
                "Dust Storm Warning: Stay indoors if possible"
            ];
            
            const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
            document.getElementById('alertMessage').textContent = randomAlert;
            document.getElementById('alertToast').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('alertToast').classList.add('hidden');
            }, 5000);
        }

        // Quick action functions
        function generateReport() {
            alert('üìä Generating comprehensive health report for selected city...\n\nReport will include:\n‚Ä¢ Air quality trends\n‚Ä¢ Temperature patterns\n‚Ä¢ Green cover analysis\n‚Ä¢ Health recommendations');
        }

        function shareData() {
            alert('üì§ Sharing city health data...\n\nData shared with:\n‚Ä¢ City Planning Department\n‚Ä¢ Environmental Agency\n‚Ä¢ Public Health Office\n‚Ä¢ Citizens Portal');
        }

        function setAlert() {
            alert('üîî Alert preferences updated!\n\nYou will receive notifications for:\n‚Ä¢ High pollution levels (AQI > 150)\n‚Ä¢ Extreme temperatures (> 40¬∞C)\n‚Ä¢ Health advisories\n‚Ä¢ Emergency alerts');
        }

        // Initialize dashboard when page loads
        window.addEventListener('load', initDashboard);

        // Toggle heatmap overlay
        function toggleHeatmap() {
            heatmapEnabled = !heatmapEnabled;
            const btn = document.getElementById('heatmapBtn');
            
            if (heatmapEnabled) {
                btn.className = 'px-3 py-1 bg-purple-700 text-white rounded text-sm';
                btn.innerHTML = 'üî• Heatmap ON';
                // Add heatmap visualization effect
                addHeatmapEffect();
            } else {
                btn.className = 'px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600';
                btn.innerHTML = 'üî• Heatmap';
                removeHeatmapEffect();
            }
        }

        // Toggle 3D view
        function toggle3D() {
            is3DEnabled = !is3DEnabled;
            const btn = document.getElementById('3dBtn');
            
            if (is3DEnabled) {
                btn.className = 'px-3 py-1 bg-blue-700 text-white rounded text-sm';
                btn.innerHTML = 'üè¢ 3D ON';
                add3DEffect();
            } else {
                btn.className = 'px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600';
                btn.innerHTML = 'üè¢ 3D View';
                remove3DEffect();
            }
        }

        // Add heatmap visualization
        function addHeatmapEffect() {
            const city = document.getElementById('citySelect').value;
            const zones = cityData[city].zones;
            
            zones.forEach(zone => {
                const intensity = zone.aqi / 200; // Normalize AQI to 0-1
                const heatColor = `rgba(255, ${Math.round(255 * (1 - intensity))}, 0, 0.6)`;
                
                L.circle([zone.lat, zone.lng], {
                    color: heatColor,
                    fillColor: heatColor,
                    fillOpacity: 0.4,
                    radius: zone.population / 50
                }).addTo(map);
            });
        }

        // Remove heatmap effect
        function removeHeatmapEffect() {
            // Reinitialize map to remove heatmap layers
            initMap();
        }

        // Add 3D building effect
        function add3DEffect() {
            const city = document.getElementById('citySelect').value;
            const zones = cityData[city].zones;
            
            zones.forEach(zone => {
                const buildingHeight = zone.population / 10000; // Scale building height
                const color = getHealthColor(zone.aqi);
                
                // Create 3D-like building representation
                L.rectangle([
                    [zone.lat - 0.01, zone.lng - 0.01],
                    [zone.lat + 0.01, zone.lng + 0.01]
                ], {
                    color: color,
                    fillColor: color,
                    fillOpacity: 0.7,
                    weight: 3
                }).addTo(map);
            });
        }

        // Remove 3D effect
        function remove3DEffect() {
            initMap();
        }

        // Citizen reporting functions
        function reportPollution() {
            alert('üè≠ Pollution Report Submitted!\n\nThank you for reporting environmental concerns.\n\nüìç Location: Current GPS coordinates\n‚è∞ Time: ' + new Date().toLocaleTimeString() + '\nüìù Status: Under investigation\n\nYou will receive updates on this report.');
        }

        function reportGreenSpace() {
            alert('üå≥ Green Space Report Submitted!\n\nThank you for contributing to our environmental database.\n\nüìç Location: Current GPS coordinates\n‚è∞ Time: ' + new Date().toLocaleTimeString() + '\nüìù Status: Verified and added to map\n\nYour contribution helps improve city planning!');
        }

        function reportHealthIssue() {
            alert('üè• Health Concern Reported!\n\nYour health report has been forwarded to relevant authorities.\n\nüìç Location: Current GPS coordinates\n‚è∞ Time: ' + new Date().toLocaleTimeString() + '\nüìù Status: Under review by health department\n\nEmergency services have been notified if applicable.');
        }

        // Setup health calculator
        function setupHealthCalculator() {
            const outdoorSlider = document.getElementById('outdoorTime');
            const outdoorValue = document.getElementById('outdoorTimeValue');
            
            outdoorSlider.addEventListener('input', function() {
                outdoorValue.textContent = this.value + ' hours';
            });
        }

        // Calculate personalized health impact
        function calculateHealthImpact() {
            const city = document.getElementById('citySelect').value;
            const cityAQI = cityData[city].aqi;
            const cityTemp = cityData[city].temp;
            
            const ageGroup = document.getElementById('ageGroup').value;
            const healthCondition = document.getElementById('healthCondition').value;
            const outdoorTime = parseInt(document.getElementById('outdoorTime').value);
            
            // Risk calculation algorithm
            let baseRisk = 0;
            
            // AQI impact
            if (cityAQI > 150) baseRisk += 3;
            else if (cityAQI > 100) baseRisk += 2;
            else if (cityAQI > 50) baseRisk += 1;
            
            // Temperature impact
            if (cityTemp > 40) baseRisk += 2;
            else if (cityTemp > 35) baseRisk += 1;
            
            // Age group multiplier
            const ageMultipliers = { child: 1.5, teen: 1.2, adult: 1.0, senior: 1.8 };
            baseRisk *= ageMultipliers[ageGroup];
            
            // Health condition multiplier
            const healthMultipliers = { healthy: 1.0, asthma: 2.0, heart: 1.8, diabetes: 1.5 };
            baseRisk *= healthMultipliers[healthCondition];
            
            // Outdoor time impact
            baseRisk *= (outdoorTime / 8); // Normalize to 8-hour baseline
            
            // Determine risk level and recommendations
            let riskLevel, recommendation;
            
            if (baseRisk < 1) {
                riskLevel = 'Low Risk';
                recommendation = 'Safe for all outdoor activities. Enjoy the fresh air!';
            } else if (baseRisk < 2) {
                riskLevel = 'Moderate Risk';
                recommendation = 'Limit strenuous outdoor activities. Consider wearing a mask in polluted areas.';
            } else if (baseRisk < 3) {
                riskLevel = 'High Risk';
                recommendation = 'Avoid prolonged outdoor exposure. Stay indoors during peak pollution hours (12-4 PM).';
            } else {
                riskLevel = 'Very High Risk';
                recommendation = 'Stay indoors. Use air purifiers. Seek medical advice if experiencing symptoms.';
            }
            
            // Display results
            document.getElementById('riskLevel').textContent = riskLevel;
            document.getElementById('riskRecommendation').textContent = recommendation;
            document.getElementById('healthRiskResult').classList.remove('hidden');
        }

        // Show periodic alerts
        setInterval(showRandomAlert, 15000);

        // Newsletter subscription function
        function subscribeNewsletter(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            alert(`üìß Newsletter Subscription Successful!\n\nThank you for subscribing with: ${email}\n\nYou'll receive:\n‚Ä¢ Weekly health insights\n‚Ä¢ Environmental alerts\n‚Ä¢ City-specific recommendations\n‚Ä¢ Emergency notifications\n\nWelcome to the Smart City Health community! üåü`);
            event.target.reset();
        }

        // Update footer statistics periodically
        function updateFooterStats() {
            const stats = {
                users: ['2.4M+', '2.5M+', '2.3M+', '2.6M+'],
                cities: ['47', '48', '46', '49'],
                dataPoints: ['15.2M', '15.3M', '15.1M', '15.4M'],
                alerts: ['892K', '895K', '889K', '898K']
            };
            
            const randomIndex = Math.floor(Math.random() * stats.users.length);
            
            document.getElementById('totalUsers').textContent = stats.users[randomIndex];
            document.getElementById('citiesCovered').textContent = stats.cities[randomIndex];
            document.getElementById('dataPoints').textContent = stats.dataPoints[randomIndex];
            document.getElementById('alertsSent').textContent = stats.alerts[randomIndex];
        }

        // Update system status timestamps
        function updateSystemStatus() {
            const lastUpdateMinutes = Math.floor(Math.random() * 5) + 1;
            const nextUpdateMinutes = Math.floor(Math.random() * 3) + 2;
            
            document.getElementById('lastSystemUpdate').textContent = `${lastUpdateMinutes} minute${lastUpdateMinutes > 1 ? 's' : ''} ago`;
            document.getElementById('nextUpdate').textContent = `In ${nextUpdateMinutes} minute${nextUpdateMinutes > 1 ? 's' : ''}`;
        }

        // Photo Contest Functions
        function submitPhoto() {
            alert('üì∏ Photo Contest Submission!\n\nüèÜ Current Theme: "Green Spaces in Urban Areas"\n\nSubmission Guidelines:\n‚Ä¢ High-resolution images only\n‚Ä¢ Must be taken within city limits\n‚Ä¢ Include location details\n‚Ä¢ Original content only\n\nüì§ Upload your photo through the mobile app or website portal.\n\nGood luck! Winner announced every Sunday! üåü');
        }

        function viewGallery() {
            alert('üñºÔ∏è Photo Contest Gallery\n\nüìä Current Standings:\n\nü•á 1st Place: "Central Park Morning" - 247 votes\nü•à 2nd Place: "Rooftop Garden" - 189 votes\nü•â 3rd Place: "Street Flowers" - 156 votes\n\nüìà Total Submissions: 127 photos\nüë• Total Votes: 2,400+\n‚è∞ Voting ends in 3 days\n\nüéØ Vote for your favorite environmental photos and help promote green awareness in our city!');
        }

        // Update contest stats periodically
        function updateContestStats() {
            const submissions = Math.floor(Math.random() * 10) + 125; // 125-135
            const votes = (Math.random() * 0.5 + 2.2).toFixed(1) + 'K'; // 2.2K-2.7K
            const daysLeft = Math.max(0, 3 - Math.floor(Date.now() / (1000 * 60 * 60 * 24)) % 7);
            
            document.getElementById('totalSubmissions').textContent = submissions;
            document.getElementById('totalVotes').textContent = votes;
            document.getElementById('daysLeft').textContent = daysLeft;
        }

        // Start footer updates
        setInterval(updateFooterStats, 45000); // Update every 45 seconds
        setInterval(updateSystemStatus, 30000); // Update every 30 seconds
        setInterval(updateContestStats, 60000); // Update contest stats every minute
    </script>
    <script>
async function loadCityData(cityName) {
  try {
    const res = await fetch(`https://your-backend-domain.com/api/city/${cityName}`);
    const data = await res.json();

    console.log(data); // Debug: check the structure

    // Update Quick Stats / Cards
    document.getElementById("airQuality").innerText = data.airQuality;
    document.getElementById("temperature").innerText = data.temperature + "¬∞C";
    document.getElementById("greenCover").innerText = data.greenCover + "%";
    document.getElementById("populationExposure").innerText = data.populationExposure + "%";
    document.getElementById("healthIndex").innerText = data.healthIndex + "/100";

    // Update Map
    updateMap(data.zones); // Tumhara Leaflet.js function jahan markers/heatmap draw hota hai

    // Update Charts
    updateCharts(data.dailyData); // Tumhara Chart.js function jahan trend charts render hota hai

    // Update Alerts
    updateAlerts(data); // Optional: logic to show alerts based on thresholds
  } catch (err) {
    console.error("Error fetching city data:", err);
  }
}
document.getElementById("cityDropdown").addEventListener("change", (e) => {
  const cityName = e.target.value;
  loadCityData(cityName);
});
function updateMap(zones) {
  zones.forEach(zone => {
    L.marker([zone.lat, zone.lng])
      .addTo(map)
      .bindPopup(`
        <b>${zone.name}</b><br>
        AQI: ${zone.aqi}<br>
        Temp: ${zone.temperature}¬∞C<br>
        Green Cover: ${zone.greenCover}%<br>
        Health Index: ${zone.healthIndex}
      `);
  });
}
function updateCharts(dailyData) {
  const labels = dailyData.map(d => d.date);
  const aqiData = dailyData.map(d => d.aqi);
  const tempData = dailyData.map(d => d.temp);
  const greenData = dailyData.map(d => d.green);

  // Example: Update AQI Line Chart
  aqiChart.data.labels = labels;
  aqiChart.data.datasets[0].data = aqiData;
  aqiChart.update();
}
document.addEventListener("DOMContentLoaded", () => {
  loadCityData("Delhi");
});

</script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9899881e007b9a83',t:'MTc1OTYzMTc5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
